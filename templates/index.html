<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>switch_home</title>
    <link rel="stylesheet" href="/static/css/bootstrap.4.3.1.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/switch_home.css">
</head>
<body>
{#{% include 'include/loading-animate.html' %}#}
{% from 'macro.html' import sh_platform, sh_community %}
{% include 'include/header.html' %}
<div class="sh-container container">
    {{ sh_platform(posts) }}
    {{ sh_community(parent_topics, child_topics) }}
    <div id="id-sh-create-topic" class="sh-right-fixed-bar hover-moveout" style="top: 40%; right: 0px; display: block; width: auto; background-color: #80bd01; color: white; padding-right: 20px;
    padding-left: 20px;">
        发布话题或寄宿信息
    </div>
</div>
{% include 'include/footer.html' %}

<script src="/static/js/jquery.3.1.1.js"></script>
<script src="/static/js/popper.min.1.14.7.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="/static/js/bootstrap.min.4.3.1.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script>
    let appendMask = function() {
        $('body').append(`<div id="id-mask"></div>`)
        $('#id-mask').click(function(){
            $('#id-mask').remove()
            $('#id-details').remove()
        })
    }

    let appendWarning = function() {
        let template = `                <div id="id-details">
                    <div class="panel">
                        <div class="header">
                            <span class="col_fade">警告</span>
                        </div>
                        <div class="inner">
                            <div class="form-group">
                                <label class="control-label text-success" for="inputSuccess1">声明</label>
                                <p>目前网站尚未真正上线, 网站内数据均为测试数据, 请不要相信, 感谢您访问, 希望喜欢我的想法.</p>
                            </div>
                        </div>
                    </div>
                </div>
`

        $('body').append(template)
    }

    let bindEvents = function() {
        $('#sh-platform-header').click(function(){
            window.location.href='/post'
        })
        $('#sh-child-header, #sh-parent-header').click(function(){
            window.location.href='/topic'
        })
        $('#id-sh-create-topic').click(function(){
            window.location.href='/topic/new'
        })
    }

    let showWarning = function() {
        appendMask()
        appendWarning()
    }

    let __main = function () {
        bindEvents()
        showWarning()
    }

    __main()

</script>
</body>
</html>
